(function(){"use strict";var e={8985:function(e,t,n){var i=n(9242),l=n(3396);const s={class:"container my-5"},o={class:"d-flex align-items-start"},a=(0,l._)("div",{class:"nav flex-column nav-pills me-3",id:"v-tab",role:"tablist","aria-orientation":"vertical"},[(0,l._)("button",{class:"btn btn-outline-primary my-1 active",id:"v-ingredient-tab","data-bs-toggle":"pill","data-bs-target":"#v-ingredient",type:"button",role:"tab","aria-controls":"v-ingredient","aria-selected":"true"},"Ingredients "),(0,l._)("button",{class:"btn btn-outline-primary my-1",id:"v-recipe-tab","data-bs-toggle":"pill","data-bs-target":"#v-recipe",type:"button",role:"tab","aria-controls":"v-recipe","aria-selected":"false"},"Recipes ")],-1),r={class:"tab-content w-100",id:"v-tabContent"},d={class:"tab-pane fade show active",id:"v-ingredient",role:"tabpanel","aria-labelledby":"v-ingredient-tab"},c={class:"tab-pane fade",id:"v-recipe",role:"tabpanel","aria-labelledby":"v-profile-tab"};function m(e,t,n,i,m,u){const g=(0,l.up)("Ingredients"),p=(0,l.up)("Recipes");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",o,[a,(0,l._)("div",r,[(0,l._)("div",d,[(0,l.Wm)(g,{onUpdateIngredients:u.updateIngredients},null,8,["onUpdateIngredients"])]),(0,l._)("div",c,[(0,l.Wm)(p,{ref:"recipes"},null,512)])])])])}var u=n(7139);const g={class:"row"},p=(0,l._)("button",{type:"button",class:"btn btn-outline-success mx-1 col-3 mx-2","data-bs-toggle":"modal","data-bs-target":"#modal-new-ingredient"}," Create Ingredient ",-1),b={class:"col-5"},h=(0,l._)("hr",null,null,-1),_={class:"row"},f={class:"card-body"},v={class:"card-title"},y={class:"card-subtitle mb-2 text-muted"},w={class:"card-text"},k=["onClick"],I=["onClick"];function C(e,t,n,s,o,a){const r=(0,l.up)("modal-new-ingredient"),d=(0,l.up)("modal-edit-ingredient");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",g,[p,(0,l._)("div",b,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.search=e),id:"",class:"form-control",placeholder:"search by name or article number...",onKeyup:t[1]||(t[1]=(...e)=>a.searchIngredients&&a.searchIngredients(...e))},null,544),[[i.nr,o.search]])])]),(0,l.Wm)(r,{onGetIngredients:a.getIngredients},null,8,["onGetIngredients"]),h,(0,l._)("div",_,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.search.length>0?o.search_result:o.ingredients,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"col-sm-3 card m-2"},[(0,l._)("div",f,[(0,l._)("h5",v,(0,u.zw)(e.name),1),(0,l._)("h6",y,"Article number : "+(0,u.zw)(e.article_number),1),(0,l._)("p",w,(0,u.zw)(e.amount)+" "+(0,u.zw)(this.getUnit(e.unit))+" € "+(0,u.zw)(e.cost),1),(0,l._)("a",{href:"#",class:"card-link",onClick:t=>this.setSelectedIngredient(e),"data-bs-toggle":"modal","data-bs-target":"#modal-edit-ingredient"}," Edit ",8,k),(0,l._)("a",{href:"#",class:"card-link",onClick:t=>a.deleteIngredient(e)},"Remove",8,I)])])))),128))]),(0,l.Wm)(d,{onGetIngredients:a.getIngredients,ref:"modalEditIngredient"},null,8,["onGetIngredients"])],64)}const R={class:"modal fade",tabindex:"-1","aria-hidden":"true",id:"modal-new-ingredient","aria-labelledby":"modal-lbl-new-ingredient"},U={class:"modal-dialog"},$={class:"modal-content"},D=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"modal-lbl-new-ingredient"},"New Ingredient"),(0,l._)("button",{id:"btn-modal-ni-close",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},S={class:"mb-3 row"},x=(0,l._)("label",{for:"name",class:"col-sm-4 col-form-label"},"Name",-1),j={class:"col-sm-8"},O={class:"mb-3 row"},T=(0,l._)("label",{for:"article_number",class:"col-sm-4 col-form-label"},"Article Number",-1),z={class:"col-sm-8"},N={class:"mb-3 row"},V=(0,l._)("label",{for:"amount",class:"col-sm-4 col-form-label"},"Amount",-1),A={class:"col-sm-8"},M={class:"mb-3 row"},P=(0,l._)("label",{for:"unit",class:"col-sm-4 col-form-label"},"Unit",-1),q={class:"col-sm-8"},H=["value"],Y={class:"mb-3 row"},Z=(0,l._)("label",{for:"cost",class:"col-sm-4 col-form-label"},"Cost",-1),G={class:"col-sm-8"},K={class:"input-group"},W=(0,l._)("span",{class:"input-group-text"},"€",-1),J={class:"modal-footer"};function B(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",U,[(0,l._)("div",$,[D,(0,l._)("div",E,[(0,l._)("div",S,[x,(0,l._)("div",j,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e)},null,512),[[i.nr,o.name]])])]),(0,l._)("div",O,[T,(0,l._)("div",z,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"article_number","onUpdate:modelValue":t[1]||(t[1]=e=>o.article_number=e)},null,512),[[i.nr,o.article_number]])])]),(0,l._)("div",N,[V,(0,l._)("div",A,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"amount","onUpdate:modelValue":t[2]||(t[2]=e=>o.amount=e)},null,512),[[i.nr,o.amount]])])]),(0,l._)("div",M,[P,(0,l._)("div",q,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.unit=e),id:"unit",class:"form-select"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.$units,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:t,value:e.id},(0,u.zw)(e.name),9,H)))),128))],512),[[i.bM,o.unit]])])]),(0,l._)("div",Y,[Z,(0,l._)("div",G,[(0,l._)("div",K,[W,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"cost","onUpdate:modelValue":t[4]||(t[4]=e=>o.cost=e)},null,512),[[i.nr,o.cost]])])])])]),(0,l._)("div",J,[(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>a.save&&a.save(...e))}," Save ")])])])])}var L={name:"modal-new-ingredient",data(){return{name:"",article_number:0,unit:{},amount:0,cost:0}},methods:{save(){try{let e={name:this.name,article_number:this.article_number,unit:this.unit,amount:this.amount,cost:this.cost};fetch(`${this.$rootUrl}/ingredients/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log("Success:",e),this.$emit("get-ingredients"),document.getElementById("btn-modal-ni-close").click()})).catch((e=>{console.log("Error:",e)})),this.name="",this.article_number="",this.unit="",this.amount=0,this.cost=0}catch(e){console.log(e)}}}},F=n(89);const Q=(0,F.Z)(L,[["render",B]]);var X=Q;const ee={class:"modal fade",tabindex:"-1","aria-hidden":"true",id:"modal-edit-ingredient","aria-labelledby":"modal-lbl-edit-ingredient"},te={class:"modal-dialog"},ne={class:"modal-content"},ie=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"modal-lbl-edit-ingredient"},"Edit Ingredient"),(0,l._)("button",{id:"btn-modal-ei-close",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),le={class:"modal-body"},se={class:"mb-3 row"},oe=(0,l._)("label",{for:"name",class:"col-sm-4 col-form-label"},"Name",-1),ae={class:"col-sm-8"},re={class:"mb-3 row"},de=(0,l._)("label",{for:"article_number",class:"col-sm-4 col-form-label"},"Article Number",-1),ce={class:"col-sm-8"},me={class:"mb-3 row"},ue=(0,l._)("label",{for:"amount",class:"col-sm-4 col-form-label"},"Amount",-1),ge={class:"col-sm-8"},pe={class:"mb-3 row"},be=(0,l._)("label",{for:"unit",class:"col-sm-4 col-form-label"},"Unit",-1),he={class:"col-sm-8"},_e=["value"],fe={class:"mb-3 row"},ve=(0,l._)("label",{for:"cost",class:"col-sm-4 col-form-label"},"Cost",-1),ye={class:"col-sm-8"},we={class:"input-group"},ke=(0,l._)("span",{class:"input-group-text"},"€",-1),Ie={class:"modal-footer"};function Ce(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)("div",ee,[(0,l._)("div",te,[(0,l._)("div",ne,[ie,(0,l._)("div",le,[(0,l._)("div",se,[oe,(0,l._)("div",ae,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>this.ingredient.name=e)},null,512),[[i.nr,this.ingredient.name]])])]),(0,l._)("div",re,[de,(0,l._)("div",ce,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"article_number","onUpdate:modelValue":t[1]||(t[1]=e=>this.ingredient.article_number=e)},null,512),[[i.nr,this.ingredient.article_number]])])]),(0,l._)("div",me,[ue,(0,l._)("div",ge,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"amount","onUpdate:modelValue":t[2]||(t[2]=e=>this.ingredient.amount=e)},null,512),[[i.nr,this.ingredient.amount]])])]),(0,l._)("div",pe,[be,(0,l._)("div",he,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>this.ingredient.unit=e),id:"unit",class:"form-select"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.$units,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:t,value:e.id},(0,u.zw)(e.name),9,_e)))),128))],512),[[i.bM,this.ingredient.unit]])])]),(0,l._)("div",fe,[ve,(0,l._)("div",ye,[(0,l._)("div",we,[ke,(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"cost","onUpdate:modelValue":t[4]||(t[4]=e=>this.ingredient.cost=e)},null,512),[[i.nr,this.ingredient.cost]])])])])]),(0,l._)("div",Ie,[(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>a.save&&a.save(...e))}," Save ")])])])])}var Re={name:"modal-edit-ingredient",data(){return{ingredient:{}}},methods:{save(){try{fetch(`${this.$rootUrl}/ingredients/${this.ingredient.id}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.ingredient)}).then((e=>e.json())).then((e=>{this.$emit("get-ingredients"),console.log("Success:",e),document.getElementById("btn-modal-ei-close").click(),alert("Ingredient updated!")})).catch((e=>{console.error("Error:",e)}))}catch(e){console.log(e)}},setIngredient(e){this.ingredient={...e}}}};const Ue=(0,F.Z)(Re,[["render",Ce]]);var $e=Ue,De={components:{ModalNewIngredient:X,ModalEditIngredient:$e},name:"ingredients-comp",data(){return{ingredients:[],search:"",search_result:[]}},methods:{searchIngredients(){this.search_result=isNaN(this.search)?this.ingredients.filter((e=>e.name.toLowerCase().includes(this.search.toLowerCase()))):this.ingredients.filter((e=>e.article_number==this.search))},setSelectedIngredient(e){this.$refs.modalEditIngredient.setIngredient(e)},getUnit(e){return this.$units.find((t=>t.id===e)).name},getIngredients(){try{fetch(`${this.$rootUrl}/ingredients/`).then((e=>e.json())).then((e=>{this.ingredients=e,this.searchIngredients(),this.$emit("update-ingredients",e)}))}catch(e){console.log(e)}},saveIngredient(e){try{let t={name:e.name,article_number:e.article_number,unit:e.unit,amount:e.amount,cost:e.cost};fetch(`${this.$rootUrl}/ingredients/${e.id}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{this.getIngredients(),console.log("Success:",e),alert(`${t.name} updated!`)})).catch((e=>{console.error("Error:",e)}))}catch(t){console.log(t)}},deleteIngredient(e){let t=confirm("Do you want to delete this ingredient?");if(t)try{fetch(`${this.$rootUrl}/ingredients/${e.id}`,{method:"DELETE"}).then((()=>this.getIngredients()))}catch(n){console.log(n)}}},created(){this.getIngredients()}};const Ee=(0,F.Z)(De,[["render",C]]);var Se=Ee;const xe={class:"row"},je={class:"col-4"},Oe=(0,l._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#modal-new-recipe",class:"btn btn-outline-success m-2"}," Create New Recipe ",-1),Te=(0,l._)("hr",null,null,-1),ze={class:"list-group",id:"list-tab",role:"tablist"},Ne=["id","aria-controls","href","onClick"],Ve=["onClick"],Ae=["onClick"],Me={class:"col-8"},Pe={class:"tab-content",id:"nav-tabContent"},qe=["id","aria-labelledby"];function He(e,t,n,i,s,o){const a=(0,l.up)("RecipeIngredients"),r=(0,l.up)("modal-new-recipe"),d=(0,l.up)("modal-edit-recipe"),c=(0,l.up)("modal-add-recipe-ingredient");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",xe,[(0,l._)("div",je,[Oe,Te,(0,l._)("div",ze,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.recipes,((e,t)=>((0,l.wg)(),(0,l.iD)("a",{key:e.id,class:(0,u.C_)(["list-group-item list-group-item-action",{active:0===t}]),id:"list-"+e.id+"-list","aria-controls":"list-"+e.id,href:"#list-"+e.id,onClick:t=>o.setSelectedRecipe(e),"data-bs-toggle":"list",role:"tab"},[(0,l.Uk)((0,u.zw)(e.name)+" ",1),(0,l._)("button",{class:"btn btn-danger btn-sm float-end",onClick:t=>o.deleteRecipe(e.id)},"Delete",8,Ve),(0,l._)("button",{class:"btn btn-warning btn-sm float-end mx-1","data-bs-toggle":"modal","data-bs-target":"#modal-edit-recipe",onClick:t=>o.setEditingRecipe(e)}," Edit ",8,Ae)],10,Ne)))),128))])]),(0,l._)("div",Me,[(0,l._)("div",Pe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.recipes,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:(0,u.C_)(["tab-pane fade show",{active:0===t}]),id:"list-"+e.id,role:"tabpanel","aria-labelledby":"list-"+e.id+"-list"},[(0,l.Wm)(a,{ref_for:!0,ref:t=>{s.ri_refs["ref-ri-"+e.id]=t},recipe:e},null,8,["recipe"])],10,qe)))),128))])])]),(0,l.Wm)(r,{onGetRecipes:o.getRecipes},null,8,["onGetRecipes"]),(0,l.Wm)(d,{onGetRecipes:o.getRecipes,ref:e=>{this.recipe_ref=e}},null,8,["onGetRecipes"]),(0,l.Wm)(c,{onAddRecipeIngredients:o.addRecipeIngredients,recipe:this.selected_recipe,ingredients:this.ingredients},null,8,["onAddRecipeIngredients","recipe","ingredients"])],64)}const Ye={class:"table"},Ze=(0,l._)("th",null,"Ingredient",-1),Ge=(0,l._)("th",null,"Unit Cost",-1),Ke=(0,l._)("th",null,"Amount",-1),We=(0,l._)("th",null,"Cost",-1),Je={key:0},Be={class:"w-25"},Le={key:0},Fe=["onUpdate:modelValue"],Qe={key:0},Xe=["onClick"],et=(0,l._)("th",{colspan:"3",class:"text-end"},"Total:",-1),tt={key:0},nt={key:0,type:"button",class:"btn btn-outline-success mx-1","data-bs-toggle":"modal","data-bs-target":"#modal-add-ri"};function it(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("table",Ye,[(0,l._)("thead",null,[(0,l._)("tr",null,[Ze,Ge,Ke,We,o.on_edit?((0,l.wg)(),(0,l.iD)("th",Je)):(0,l.kq)("",!0)])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.recipe_ingredients,((e,n)=>((0,l.wg)(),(0,l.iD)("tr",{key:n},[(0,l._)("td",null,(0,u.zw)(e.ingredient.name),1),(0,l._)("td",null,(0,u.zw)(e.ingredient.amount)+" "+(0,u.zw)(e.ingredient.unit.name)+" € "+(0,u.zw)(e.ingredient.cost),1),(0,l._)("td",Be,[o.on_edit?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("label",Le,(0,u.zw)(e.amount),1)),o.on_edit?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:1,class:"form-control w-50",type:"number","onUpdate:modelValue":t=>e.amount=t,onChange:t[0]||(t[0]=(...e)=>a.totalCost&&a.totalCost(...e))},null,40,Fe)),[[i.nr,e.amount]]):(0,l.kq)("",!0)]),(0,l._)("td",null,"€ "+(0,u.zw)(this.subTotal(n)),1),o.on_edit?((0,l.wg)(),(0,l.iD)("td",Qe,[(0,l._)("button",{class:"btn btn-sm btn-outline-danger",onClick:e=>a.remove(n)},"REMOVE",8,Xe)])):(0,l.kq)("",!0)])))),128))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[et,(0,l._)("th",null,"€ "+(0,u.zw)(a.totalCost()),1),o.on_edit?((0,l.wg)(),(0,l.iD)("th",tt)):(0,l.kq)("",!0)])])]),o.on_edit?((0,l.wg)(),(0,l.iD)("button",nt," Add Ingredient ")):(0,l.kq)("",!0),o.on_edit?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,class:"btn btn-outline-success mx-1",onClick:t[1]||(t[1]=(...e)=>a.editRecipe&&a.editRecipe(...e))},"Edit Recipe")),o.on_edit?((0,l.wg)(),(0,l.iD)("button",{key:2,class:"btn btn-outline-primary mx-1 float-end",onClick:t[2]||(t[2]=(...e)=>a.saveRecipe&&a.saveRecipe(...e))},"Save Recipe")):(0,l.kq)("",!0),o.on_edit?((0,l.wg)(),(0,l.iD)("button",{key:3,class:"btn btn-outline-danger mx-1 float-end",onClick:t[3]||(t[3]=(...e)=>a.cancelEdit&&a.cancelEdit(...e))},"Cancel")):(0,l.kq)("",!0)],64)}var lt={name:"recipe-ingredients",components:{},props:["recipe"],data(){return{recipe_ingredients:[],new_ingredient:{},new_amount:0,on_edit:!1}},methods:{addIngredient(e){this.recipe_ingredients.push(e)},getData(){try{fetch(`${this.$rootUrl}/recipes/${this.recipe.id}/`).then((e=>e.json())).then((e=>{this.recipe_ingredients=e,this.totalCost()}))}catch(e){console.log(e)}},cancelEdit(){this.on_edit=!1,this.getData()},editRecipe(){this.on_edit=!0},saveRecipe(){try{fetch(`${this.$rootUrl}/recipes/update/${this.recipe.id}/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.recipe_ingredients)}).then((e=>e.json())).then((e=>{this.recipe_ingredients=e,this.on_edit=!1,alert("recipe updated!"),console.log("Success:",e)})).catch((e=>{console.error("Error:",e)}))}catch(e){console.log(e)}},remove(e){this.recipe_ingredients.splice(e,1)},subTotal(e){return this.recipe_ingredients.length>0?this.recipe_ingredients[e].amount*this.recipe_ingredients[e].ingredient.cost:0},totalCost(){let e=0;return this.recipe_ingredients.forEach((t=>{e+=t.ingredient.cost*t.amount})),e}},created(){this.getData()}};const st=(0,F.Z)(lt,[["render",it]]);var ot=st;const at={class:"modal fade",tabindex:"-1","aria-hidden":"true",id:"modal-add-ri","aria-labelledby":"modal-lbl-add-ri"},rt={class:"modal-dialog"},dt={class:"modal-content"},ct=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"modal-lbl-add-ri"},"Add Ingredient"),(0,l._)("button",{id:"btn-modal-close",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),mt={class:"modal-body"},ut={class:"mb-3 row"},gt=(0,l._)("label",{for:"ingredient",class:"col-sm-3 col-form-label"},"Ingredient",-1),pt={class:"col-sm-9"},bt=["value"],ht={key:0},_t={class:"mb-3 row"},ft=(0,l._)("label",{class:"col-sm-3 col-form-label"},"Cost",-1),vt={class:"col-sm-9 col-form-label"},yt={class:"mb-3 row"},wt=(0,l._)("label",{for:"amount",class:"col-sm-3 col-form-label"},"Amount",-1),kt={class:"col-sm-9"},It={class:"mb-3 row"},Ct=(0,l._)("label",{class:"col-sm-3 col-form-label"},"Total Cost",-1),Rt={class:"col-sm-9 col-form-label"},Ut={class:"modal-footer"};function $t(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)("div",at,[(0,l._)("div",rt,[(0,l._)("div",dt,[ct,(0,l._)("div",mt,[(0,l._)("div",ut,[gt,(0,l._)("div",pt,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.ingredient=e),id:"ingredient",class:"form-select"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.ingredients,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:t,value:e},(0,u.zw)(e.name),9,bt)))),128))],512),[[i.bM,o.ingredient]])])]),Object.keys(o.ingredient).length>0?((0,l.wg)(),(0,l.iD)("div",ht,[(0,l._)("div",_t,[ft,(0,l._)("label",vt,(0,u.zw)(o.ingredient.amount)+" "+(0,u.zw)(a.getUnit(o.ingredient.unit).name)+" € "+(0,u.zw)(o.ingredient.cost),1)]),(0,l._)("div",yt,[wt,(0,l._)("div",kt,[(0,l.wy)((0,l._)("input",{type:"number",id:"amount","onUpdate:modelValue":t[1]||(t[1]=e=>o.amount=e),class:"form-control"},null,512),[[i.nr,o.amount]])])]),(0,l._)("div",It,[Ct,(0,l._)("label",Rt,"€ "+(0,u.zw)(a.total_cost()),1)])])):(0,l.kq)("",!0)]),(0,l._)("div",Ut,[Object.keys(o.ingredient).length>0?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>a.add&&a.add(...e))}," Add ")):(0,l.kq)("",!0)])])])])}var Dt={name:"ModalAddRecipeIngredient",props:["recipe","ingredients"],data(){return{ingredient:{},amount:0,cost:0}},methods:{getUnit(e){return this.$units.find((t=>t.id===e))},add(){if(this.ingredient.name){this.ingredient.unit=this.getUnit(this.ingredient.unit);let e={ingredient:this.ingredient,amount:this.amount,recipe:this.recipe};this.$emit("add-recipe-ingredients",e),this.ingredient={},this.amount=0,this.cost=0,document.getElementById("btn-modal-close").click()}},total_cost(){return this.ingredient.cost*this.amount}}};const Et=(0,F.Z)(Dt,[["render",$t]]);var St=Et;const xt={class:"modal fade",tabindex:"-1","aria-hidden":"true",id:"modal-new-recipe","aria-labelledby":"modal-lbl-new-recipe"},jt={class:"modal-dialog"},Ot={class:"modal-content"},Tt=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"modal-lbl-new-recipe"},"Create New Recipe"),(0,l._)("button",{id:"btn-modal-nr-close",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),zt={class:"modal-body"},Nt={class:"mb-3 row"},Vt=(0,l._)("label",{for:"name",class:"col-sm-4 col-form-label"},"Name",-1),At={class:"col-sm-8"},Mt={class:"modal-footer"};function Pt(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)("div",xt,[(0,l._)("div",jt,[(0,l._)("div",Ot,[Tt,(0,l._)("div",zt,[(0,l._)("div",Nt,[Vt,(0,l._)("div",At,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e)},null,512),[[i.nr,o.name]])])])]),(0,l._)("div",Mt,[(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>a.save&&a.save(...e))}," Save ")])])])])}var qt={name:"modal-new-recipe",data(){return{name:""}},methods:{save(){try{let e={name:this.name};fetch(`${this.$rootUrl}/recipes/recipes/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log("Success:",e),this.$emit("get-recipes"),document.getElementById("btn-modal-nr-close").click()})).catch((e=>{console.log("Error:",e)})),this.name=""}catch(e){console.log(e)}}}};const Ht=(0,F.Z)(qt,[["render",Pt]]);var Yt=Ht;const Zt={class:"modal fade",tabindex:"-1","aria-hidden":"true",id:"modal-edit-recipe","aria-labelledby":"modal-lbl-edit-recipe"},Gt={class:"modal-dialog"},Kt={class:"modal-content"},Wt=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"modal-lbl-edit-recipe"},"Edit Recipe"),(0,l._)("button",{id:"btn-modal-er-close",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Jt={class:"modal-body"},Bt={class:"mb-3 row"},Lt=(0,l._)("label",{for:"name",class:"col-sm-4 col-form-label"},"Name",-1),Ft={class:"col-sm-8"},Qt={class:"modal-footer"};function Xt(e,t,n,s,o,a){return(0,l.wg)(),(0,l.iD)("div",Zt,[(0,l._)("div",Gt,[(0,l._)("div",Kt,[Wt,(0,l._)("div",Jt,[(0,l._)("div",Bt,[Lt,(0,l._)("div",Ft,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.editing_recipe.name=e)},null,512),[[i.nr,o.editing_recipe.name]])])])]),(0,l._)("div",Qt,[(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>a.save&&a.save(...e))}," Save ")])])])])}var en={name:"modal-edit-recipe",data(){return{editing_recipe:{}}},methods:{setEditingRecipe(e){this.editing_recipe={...e}},save(){try{fetch(`${this.$rootUrl}/recipes/recipes/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.editing_recipe)}).then((e=>e.json())).then((e=>{console.log("Success:",e),this.$emit("get-recipes"),document.getElementById("btn-modal-er-close").click()})).catch((e=>{console.log("Error:",e)})),this.name=""}catch(e){console.log(e)}}}};const tn=(0,F.Z)(en,[["render",Xt]]);var nn=tn,ln={name:"recipes-comp",components:{RecipeIngredients:ot,ModalAddRecipeIngredient:St,ModalNewRecipe:Yt,ModalEditRecipe:nn},data(){return{ri_refs:{},recipe_ref:{},recipes:[],selected_recipe:{},ingredients:[]}},methods:{updateIngredients(e){for(var t in this.ingredients=e,this.ri_refs)this.ri_refs[t].getData()},setEditingRecipe(e){this.recipe_ref.setEditingRecipe(e)},deleteRecipe(e){if(confirm("Are you sure to delete the recipe?")){console.log(e);try{fetch(`${this.$rootUrl}/recipes/recipe/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e)).then((e=>{console.log(e),this.getRecipes()}))}catch(t){console.log("error: ",t)}}},addRecipeIngredients(e){this.ri_refs["ref-ri-"+this.selected_recipe.id].addIngredient(e)},setSelectedRecipe(e){this.selected_recipe=e},getRecipes(){try{fetch(`${this.$rootUrl}/recipes/recipes/`).then((e=>e.json())).then((e=>{this.recipes=e,this.setSelectedRecipe(e[0])}))}catch(e){console.log(e)}}},created(){this.getRecipes()}};const sn=(0,F.Z)(ln,[["render",He]]);var on=sn,an={name:"App",components:{Ingredients:Se,Recipes:on},methods:{updateIngredients(e){this.$refs.recipes.updateIngredients(e)}}};const rn=(0,F.Z)(an,[["render",m]]);var dn=rn;n(8937);const cn="https://receipe-manager.herokuapp.com",mn=(0,i.ri)(dn);try{fetch(`${cn}/ingredients/units/`).then((e=>e.json())).then((e=>{mn.config.globalProperties.$rootUrl=cn,mn.config.globalProperties.$units=e,mn.mount("#app")}))}catch(un){console.log(un)}}},t={};function n(i){var l=t[i];if(void 0!==l)return l.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,l,s){if(!i){var o=1/0;for(c=0;c<e.length;c++){i=e[c][0],l=e[c][1],s=e[c][2];for(var a=!0,r=0;r<i.length;r++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(a=!1,s<o&&(o=s));if(a){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,s,o=i[0],a=i[1],r=i[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(l in a)n.o(a,l)&&(n.m[l]=a[l]);if(r)var c=r(n)}for(t&&t(i);d<o.length;d++)s=o[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},i=self["webpackChunkrecipe_manager_client"]=self["webpackChunkrecipe_manager_client"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(8985)}));i=n.O(i)})();
//# sourceMappingURL=app.0b45b31f.js.map